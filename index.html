<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>DM99</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&display=swap" rel="stylesheet">
    <!-- Enlace a CSS Externo -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="title">DM99</div>

    <!-- Selector de Instrumentos -->
    <div class="instrument-selector">
        <!-- Botones de Instrumentos con Silencio y Volumen -->
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="kick">Kick</button>
            <input type="range" class="volume-slider" data-instrument="kick" min="0" max="1" step="0.01" value="0.8">
            <button class="mute-button" data-instrument="kick">M</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="snare">Snare</button>
            <input type="range" class="volume-slider" data-instrument="snare" min="0" max="1" step="0.01" value="0.7">
            <button class="mute-button" data-instrument="snare">M</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="hihatClosed">Hi-Hat C</button>
            <input type="range" class="volume-slider" data-instrument="hihatClosed" min="0" max="1" step="0.01" value="0.6">
            <button class="mute-button" data-instrument="hihatClosed">M</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="hihatOpened">Hi-Hat O</button>
            <input type="range" class="volume-slider" data-instrument="hihatOpened" min="0" max="1" step="0.01" value="0.6">
            <button class="mute-button" data-instrument="hihatOpened">M</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="clap">Clap</button>
            <input type="range" class="volume-slider" data-instrument="clap" min="0" max="1" step="0.01" value="0.7">
            <button class="mute-button" data-instrument="clap">M</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="bassSynth">Bajo</button>
            <input type="range" class="volume-slider" data-instrument="bassSynth" min="0" max="1" step="0.01" value="0.5">
            <button class="mute-button" data-instrument="bassSynth">M</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="midTom">Tom</button>
            <input type="range" class="volume-slider" data-instrument="midTom" min="0" max="1" step="0.01" value="0.7">
            <button class="mute-button" data-instrument="midTom">M</button>
        </div>
    </div>

    <!-- Máquina de Ritmos -->
    <div id="drum-machine">
        <!-- Los pads serán generados dinámicamente -->
    </div>

    <!-- Controles -->
    <div id="controls">
        <button id="play" class="control-button">Reproducir</button>
        <button id="stop" class="control-button">Detener</button>
        <button id="random-bass" class="control-button">Línea de Bajo Aleatoria</button>
        <button id="show-instructions" class="control-button">Guía del Usuario</button>
        <div id="tempo-container">
            <label for="tempo">Tempo:</label>
            <input type="range" id="tempo" min="60" max="200" value="120">
            <div id="bpm-display">120</div>
        </div>
        <div id="master-volume-container">
            <label for="master-volume">Master Vol:</label>
            <input type="range" id="master-volume" min="0" max="1" step="0.01" value="1">
        </div>
    </div>

    <!-- Controles ADSR -->
    <div id="adsr-controls">
        <h3>ADSR</h3>
        <div class="adsr-instrument">
            <h4>Kick</h4>
            <label>Ataque:
                <input type="range" class="adsr-slider" data-instrument="kick" data-param="attack" min="0" max="1" step="0.01" value="0.1">
            </label>
            <label>Decay:
                <input type="range" class="adsr-slider" data-instrument="kick" data-param="decay" min="0" max="2" step="0.01" value="0.3">
            </label>
            <label>Sustain:
                <input type="range" class="adsr-slider" data-instrument="kick" data-param="sustain" min="0" max="1" step="0.01" value="0.7">
            </label>
            <label>Release:
                <input type="range" class="adsr-slider" data-instrument="kick" data-param="release" min="0" max="2" step="0.01" value="0.5">
            </label>
        </div>
        <div class="adsr-instrument">
            <h4>Hi-Hat</h4>
            <label>Ataque:
                <input type="range" class="adsr-slider" data-instrument="hihatClosed" data-param="attack" min="0" max="1" step="0.01" value="0.05">
            </label>
            <label>Decay:
                <input type="range" class="adsr-slider" data-instrument="hihatClosed" data-param="decay" min="0" max="2" step="0.01" value="0.2">
            </label>
            <label>Sostenimiento:
                <input type="range" class="adsr-slider" data-instrument="hihatClosed" data-param="sustain" min="0" max="1" step="0.01" value="0.5">
            </label>
            <label>Release:
                <input type="range" class="adsr-slider" data-instrument="hihatClosed" data-param="release" min="0" max="2" step="0.01" value="0.3">
            </label>
        </div>
        <!-- Se han eliminado los Controles ADSR para el Sintetizador de Bajo -->
    </div>

    <!-- Modal de Instrucciones -->
    <div id="modal">
        <div id="modal-content">
            <button id="close-modal">&times;</button>
            <h2>Guía del Usuario</h2>
            
            <ul>
                <li>Selecciona un instrumento.</li>
                <li>Selecciona los pads para activar o desactivar pasos para ese instrumento.</li>
                <li>Para el Bajo, ajusta el tono de cada paso usando el botón que aparece en los pads activos.</li>
                <li>Usa el botón de silencio (M) y los deslizadores de volumen junto a cada instrumento para controlar los niveles de sonido.</li>
                <li>Ajusta el tempo usando el control deslizante debajo de 'Tempo'.</li>
                <li>Ajusta el volumen maestro usando el control deslizante de 'Master Vol'.</li>
                <li>Usa los controles ADSR para moldear el sonido del Kick y el Hi-Hat.</li>
                <li>Haz clic en 'Reproducir' para iniciar la secuencia y en 'Detener' para detenerla.</li>
                <li>Puedes usar 'Línea de Bajo Aleatoria' para generar una secuencia de bajo aleatoria de 16 pasos.</li>
            </ul>
            
        </div>
    </div>

    <!-- Pie de Página -->
        <footer>
    DM99 Beta v1.0 | J.Gazca &copy; <span id="current-year"></span>
</footer>

    <!-- Incluir la Biblioteca NexusUI para el Control de Knob -->
    <script src="https://cdn.jsdelivr.net/npm/nexusui@2.0.1/dist/NexusUI.min.js"></script>
    <!-- Enlace a JavaScript Externo -->
    <script src="script.js"></script>
</body>
</html>
