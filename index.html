<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DM99</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&display=swap" rel="stylesheet">
    <!-- Link to External CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Buy Me a Coffee Button -->
    <a href="https://www.buymeacoffee.com/georgegeorge" class="buy-me-coffee" target="_blank" aria-label="Support us with a coffee ğŸº">
        ğŸº Buy Me a Beer
    </a>

    <div id="title">DM99</div>

    <!-- Instrument Selector -->
    <div class="instrument-selector">
        <!-- Instrument Containers with Mute, Solo, and Volume Controls -->
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="kick">Kick</button>
            <button class="solo-button" data-instrument="kick">ğŸ”Š</button>
            <input type="range" class="volume-slider" data-instrument="kick" min="0" max="1" step="0.01" value="0.8">
            <button class="mute-button" data-instrument="kick">ğŸ”‡</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="snare">Snare</button>
            <button class="solo-button" data-instrument="snare">ğŸ”Š</button>
            <input type="range" class="volume-slider" data-instrument="snare" min="0" max="1" step="0.01" value="0.7">
            <button class="mute-button" data-instrument="snare">ğŸ”‡</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="hihatClosed">Hi-Hat C</button>
            <button class="solo-button" data-instrument="hihatClosed">ğŸ”Š</button>
            <input type="range" class="volume-slider" data-instrument="hihatClosed" min="0" max="1" step="0.01" value="0.6">
            <button class="mute-button" data-instrument="hihatClosed">ğŸ”‡</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="hihatOpened">Hi-Hat O</button>
            <button class="solo-button" data-instrument="hihatOpened">ğŸ”Š</button>
            <input type="range" class="volume-slider" data-instrument="hihatOpened" min="0" max="1" step="0.01" value="0.6">
            <button class="mute-button" data-instrument="hihatOpened">ğŸ”‡</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="clap">Clap</button>
            <button class="solo-button" data-instrument="clap">ğŸ”Š</button>
            <input type="range" class="volume-slider" data-instrument="clap" min="0" max="1" step="0.01" value="0.7">
            <button class="mute-button" data-instrument="clap">ğŸ”‡</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="bassSynth">Bass</button>
            <button class="solo-button" data-instrument="bassSynth">ğŸ”Š</button>
            <input type="range" class="volume-slider" data-instrument="bassSynth" min="0" max="1" step="0.01" value="0.5">
            <button class="mute-button" data-instrument="bassSynth">ğŸ”‡</button>
        </div>
        <div class="instrument-container">
            <button class="instrument-button" data-instrument="midTom">Tom</button>
            <button class="solo-button" data-instrument="midTom">ğŸ”Š</button>
            <input type="range" class="volume-slider" data-instrument="midTom" min="0" max="1" step="0.01" value="0.7">
            <button class="mute-button" data-instrument="midTom">ğŸ”‡</button>
        </div>
    </div>

    <!-- Drum Machine Pads -->
    <div id="drum-machine">
        <!-- Pads will be generated dynamically -->
    </div>

    <!-- Controls -->
    <div id="controls">
        <button id="play" class="control-button">â–¶ï¸ Play</button>
        <button id="stop" class="control-button">â¹ï¸ Stop</button>
        <button id="random-bass" class="control-button">ğŸ² Random Bass Line</button>
        <button id="download-audio" class="control-button">ğŸ’¾ Download Audio</button>
        <button id="show-instructions" class="control-button">ğŸ“– User Guide</button>
        
        <div id="tempo-container">
            <label for="tempo">Tempo:</label>
            <input type="range" id="tempo" min="60" max="200" value="120">
            <div id="bpm-display">120</div>
        </div>
        
        <div id="swing-container">
            <label for="swing">Swing:</label>
            <input type="range" id="swing" min="0" max="100" value="0">
            <div id="swing-display">0%</div>
        </div>
        
        <div id="master-volume-container">
            <label for="master-volume">Master Volume:</label>
            <input type="range" id="master-volume" min="0" max="1" step="0.01" value="1">
        </div>
        
        <div id="lowpass-filter-container">
            <label for="lowpass-filter">Low-Pass Filter:</label>
            <input type="range" id="lowpass-filter" min="200" max="20000" step="100" value="20000">
            <div id="lowpass-display">20000 Hz</div>
        </div>
        
        <div id="highpass-filter-container">
            <label for="highpass-filter">High-Pass Filter:</label>
            <input type="range" id="highpass-filter" min="20" max="2000" step="100" value="20">
            <div id="highpass-display">20 Hz</div>
        </div>
    </div>

    <!-- ADSR Controls -->
    <div id="adsr-controls">
        <h3>ADSR</h3>
        <div class="adsr-instrument">
            <h4>Kick</h4>
            <label>Attack:
                <input type="range" class="adsr-slider" data-instrument="kick" data-param="attack" min="0" max="1" step="0.01" value="0.1">
            </label>
            <label>Decay:
                <input type="range" class="adsr-slider" data-instrument="kick" data-param="decay" min="0" max="2" step="0.01" value="0.3">
            </label>
            <label>Sustain:
                <input type="range" class="adsr-slider" data-instrument="kick" data-param="sustain" min="0" max="1" step="0.01" value="0.7">
            </label>
            <label>Release:
                <input type="range" class="adsr-slider" data-instrument="kick" data-param="release" min="0" max="2" step="0.01" value="0.5">
            </label>
        </div>
        <div class="adsr-instrument">
            <h4>Hi-Hat</h4>
            <label>Attack:
                <input type="range" class="adsr-slider" data-instrument="hihatClosed" data-param="attack" min="0" max="1" step="0.01" value="0.05">
            </label>
            <label>Decay:
                <input type="range" class="adsr-slider" data-instrument="hihatClosed" data-param="decay" min="0" max="2" step="0.01" value="0.2">
            </label>
            <label>Sustain:
                <input type="range" class="adsr-slider" data-instrument="hihatClosed" data-param="sustain" min="0" max="1" step="0.01" value="0.5">
            </label>
            <label>Release:
                <input type="range" class="adsr-slider" data-instrument="hihatClosed" data-param="release" min="0" max="2" step="0.01" value="0.3">
            </label>
        </div>
    </div>

    <!-- Instructions Modal -->
    <div id="modal">
        <div id="modal-content">
            <button id="close-modal">&times;</button>
            <h2>User Guide ğŸ“–</h2>
            
            <ul>
                <li>Select an instrument by clicking its name.</li>
                <li>Click on the pads to activate or deactivate steps for that instrument.</li>
                <li>For Bass, adjust the pitch of each step using the knob that appears on active pads.</li>
                <li>Use the mute button (ğŸ”‡), solo button (ğŸ”Š), and the volume sliders next to each instrument to control sound levels.</li>
                <li>Adjust the tempo using the slider under 'Tempo'.</li>
                <li>Adjust the swing using the slider under 'Swing'.</li>
                <li>Adjust the master volume using the 'Master Volume' slider.</li>
                <li>Adjust the Low-Pass Filter cutoff frequency using the 'Low-Pass Filter' slider.</li>
                <li>Adjust the High-Pass Filter cutoff frequency using the 'High-Pass Filter' slider.</li>
                <li>Use the ADSR controls to shape the sound of the Kick and Hi-Hat.</li>
                <li>Click 'Play' â–¶ï¸ to start the sequence and 'Stop' â¹ï¸ to stop it.</li>
                <li>You can use 'Random Bass Line' ğŸ² to generate a 16-step random bass sequence duplicated to fill 32 steps.</li>
                <li>Click 'Download Audio' ğŸ’¾ to download the complete sequence as a WAV file.</li>
            </ul>
            
        </div>
    </div>

    <!-- Footer -->
    <footer>
        DM99 Beta v1.0 | J.Gazca &copy; <span id="current-year"></span>
    </footer>

    <!-- Include NexusUI Library for Knob Control -->
    <script src="https://cdn.jsdelivr.net/npm/nexusui@2.0.1/dist/NexusUI.min.js"></script>
    <!-- Link to External JavaScript -->
    <script src="script.js"></script>
</body>
</html>
